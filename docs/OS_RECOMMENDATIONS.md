# Выбор операционной системы для VPN сервиса

## Рекомендация: Ubuntu 22.04 LTS ⭐

**Почему Ubuntu 22.04 LTS:**

1. ✅ **WireGuard встроен в ядро** (начиная с Ubuntu 21.04)
   - Не нужна дополнительная компиляция
   - Простая установка: `apt install wireguard`

2. ✅ **Отличная поддержка Node.js и PostgreSQL**
   - Официальные репозитории NodeSource
   - PostgreSQL легко устанавливается

3. ✅ **Долгосрочная поддержка (LTS)**
   - Поддержка до 2027 года (Ubuntu 22.04)
   - Регулярные обновления безопасности

4. ✅ **Огромная база документации**
   - Много инструкций и решений проблем
   - Активное сообщество

5. ✅ **Простота настройки**
   - Интуитивный пакетный менеджер (apt)
   - Четкая структура файлов

6. ✅ **Совместимость**
   - Работает на всех основных VPS провайдерах
   - Хорошая поддержка облачных провайдеров

## Варианты Ubuntu

### Ubuntu 22.04 LTS (Рекомендуется) ⭐

**Плюсы:**
- Последняя LTS версия
- WireGuard встроен
- Актуальные версии пакетов
- Поддержка до 2027 года

**Минусы:**
- Нет (для нашего случая)

**Рекомендация:** Используйте эту версию для всех серверов

### Ubuntu 20.04 LTS

**Плюсы:**
- Очень стабильная
- Проверенная временем
- Поддержка до 2025 года

**Минусы:**
- WireGuard нужно устанавливать через PPA (но это просто)
- Более старые версии пакетов

**Рекомендация:** Если провайдер предлагает только эту версию - подойдет, но 22.04 предпочтительнее

### Ubuntu 24.04 LTS

**Плюсы:**
- Самая новая LTS версия
- Поддержка до 2029 года

**Минусы:**
- Может быть менее стабильной (новая версия)
- Меньше проверенных инструкций

**Рекомендация:** Можно использовать, но 22.04 более проверенная

## Альтернативные ОС

### Debian 11/12

**Плюсы:**
- ✅ Очень стабильный
- ✅ Легковесный
- ✅ Отличная безопасность
- ✅ Долгая поддержка

**Минусы:**
- ⚠️ Менее популярен для Node.js проектов
- ⚠️ Более старые пакеты
- ⚠️ Меньше инструкций в интернете
- ⚠️ WireGuard может потребовать больше настроек

**Рекомендация:** Подойдет, но Ubuntu проще для начала

### Rocky Linux 8/9 (бывший CentOS)

**Плюсы:**
- ✅ Enterprise-уровень
- ✅ Долгая поддержка
- ✅ Очень стабильный

**Минусы:**
- ⚠️ Меньше документации для Node.js
- ⚠️ Использует dnf вместо apt
- ⚠️ Может быть сложнее для новичков
- ⚠️ Меньше готовых решений

**Рекомендация:** Только если у вас есть опыт с RHEL/CentOS

### Alpine Linux

**Плюсы:**
- ✅ Очень легковесный (идеален для Docker)
- ✅ Быстрый

**Минусы:**
- ⚠️ Другой пакетный менеджер (apk)
- ⚠️ Может быть сложнее в настройке
- ⚠️ Меньше документации
- ⚠️ Использует musl вместо glibc (могут быть проблемы с бинарниками)

**Рекомендация:** Только для Docker контейнеров, не для VPS

## Сравнительная таблица

| ОС | Простота | Стабильность | Документация | WireGuard | Рекомендация |
|----|----------|--------------|--------------|-----------|--------------|
| **Ubuntu 22.04 LTS** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | Встроен | ⭐⭐⭐⭐⭐ **Лучший выбор** |
| Ubuntu 20.04 LTS | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | PPA | ⭐⭐⭐⭐ Отлично |
| Debian 11/12 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | Нужна настройка | ⭐⭐⭐ Подойдет |
| Rocky Linux 8/9 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | Нужна настройка | ⭐⭐ Для опытных |
| Alpine Linux | ⭐⭐ | ⭐⭐⭐ | ⭐⭐ | Нужна настройка | ⭐ Для Docker |

## Установка на VPS провайдерах

### Vultr
- ✅ Ubuntu 22.04 LTS доступна
- ✅ Можно выбрать при создании сервера
- Рекомендация: Выберите "Ubuntu 22.04 LTS x64"

### DigitalOcean
- ✅ Ubuntu 22.04 LTS доступна
- ✅ Можно выбрать при создании droplet
- Рекомендация: Выберите "Ubuntu 22.04 (LTS) x64"

### HostHatch
- ✅ Ubuntu 22.04 LTS доступна
- ✅ Можно выбрать в настройках
- Рекомендация: Выберите "Ubuntu 22.04 LTS"

## Что делать после установки ОС

### 1. Обновление системы

```bash
sudo apt update
sudo apt upgrade -y
```

### 2. Настройка базовой безопасности

```bash
# Настройка firewall
sudo ufw allow 22/tcp  # SSH
sudo ufw allow 51820/udp  # WireGuard (только для VPN серверов)
sudo ufw enable

# Отключение root логина через SSH (рекомендуется)
sudo nano /etc/ssh/sshd_config
# Установите: PermitRootLogin no
sudo systemctl restart sshd
```

### 3. Создание пользователя (если нужно)

```bash
sudo adduser vpn
sudo usermod -aG sudo vpn
```

### 4. Установка WireGuard (для VPN серверов)

```bash
# Ubuntu 22.04 - WireGuard уже в ядре
sudo apt install wireguard wireguard-tools qrencode

# Ubuntu 20.04 - нужно добавить PPA
sudo add-apt-repository ppa:wireguard/wireguard
sudo apt update
sudo apt install wireguard wireguard-tools qrencode
```

### 5. Установка Node.js (для Application Server)

```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs
```

### 6. Установка PostgreSQL (для Application Server)

```bash
sudo apt install -y postgresql postgresql-contrib
```

## Итоговые рекомендации

### Для Application Server:
✅ **Ubuntu 22.04 LTS** - идеальный выбор

### Для VPN серверов:
✅ **Ubuntu 22.04 LTS** - идеальный выбор (WireGuard встроен)

### Для всех серверов:
✅ **Используйте одну и ту же ОС** (Ubuntu 22.04 LTS) для упрощения управления

## Часто задаваемые вопросы

**Q: Можно ли использовать Ubuntu 24.04?**
A: Да, можно, но 22.04 LTS более проверенная и стабильная.

**Q: Что если провайдер предлагает только Ubuntu 20.04?**
A: Подойдет отлично, просто WireGuard нужно установить через PPA (это просто).

**Q: Нужна ли минимальная установка или полная?**
A: Минимальная (Minimal Install) - этого достаточно, можно установить нужные пакеты позже.

**Q: Можно ли использовать другой дистрибутив?**
A: Да, но Ubuntu будет проще всего для настройки и поддержки.

## Ссылки

- Ubuntu 22.04 LTS: https://ubuntu.com/download/server
- WireGuard установка: https://www.wireguard.com/install/
- Node.js установка: https://github.com/nodesource/distributions

